<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Stay22 • Mappa</title>

    <!--
      NOTE TRACKING (Stay22):
      - NON cambiare l'embed ID: è la parte dopo /embed/ nell'URL dell'iframe.
      - Se usi il parametro "campaign" per sub-tracking, questo template lo preserva:
        puoi passare ?campaign=<affiliate_slug> all'URL della pagina e verrà aggiunto all'iframe.
    -->

    <style>
      :root {
        --page-bg: #0b0f14;
        --panel-bg: rgba(255, 255, 255, 0.06);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.72);
        --border: rgba(255, 255, 255, 0.12);
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: var(--page-bg);
        color: var(--text);
      }

      /* Layout: una singola pagina "full height" con un piccolo header e la mappa che occupa il resto */
      .wrap {
        min-height: 100%;
        display: grid;
        grid-template-rows: auto 1fr;
      }

      header {
        padding: 14px 16px;
        border-bottom: 1px solid var(--border);
        background: var(--panel-bg);
        backdrop-filter: blur(8px);
      }

      header .row {
        display: flex;
        gap: 10px;
        align-items: baseline;
        flex-wrap: wrap;
      }

      header h1 {
        font-size: 14px;
        margin: 0;
        letter-spacing: 0.2px;
        font-weight: 650;
      }

      header .note {
        font-size: 12px;
        margin: 0;
        color: var(--muted);
      }

      main {
        /* nessun padding: la mappa prende tutta la larghezza */
        padding: 0;
      }

      /* Iframe responsive: occupa tutta l'altezza disponibile */
      #stay22-widget {
        width: 100%;
        height: calc(100vh - 49px); /* header approx */
        min-height: 428px;         /* altezza minima come nel tuo snippet */
        border: 0;
        display: block;
      }

      /* Su schermi piccoli, riduco leggermente l'header */
      @media (max-width: 520px) {
        header { padding: 12px 14px; }
        #stay22-widget { height: calc(100vh - 45px); }
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div class="row">
          <h1>Stay22 • Mappa</h1>
          <p class="note">
            Campo “destinazione” nel widget: vuoto di default (non passiamo parametri di destinazione).
            (Opzionale) sub-tracking: aggiungi <code>?campaign=TUO_SLUG</code> all’URL della pagina.
          </p>
        </div>
      </header>

      <main>
        <!-- ✅ EMBED ID invariato: 68e0453924ecc1f8e80860e1 -->
        <iframe
          id="stay22-widget"
          title="Stay22 Widget"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          src="https://www.stay22.com/embed/68e0453924ecc1f8e80860e1"
          allowfullscreen
        ></iframe>
      </main>
    </div>

    <script>
      // Se usi sub-tracking via "campaign", puoi passarlo nella URL della pagina:
      //   https://tuodominio.com/?campaign=<affiliate_slug>
      // e questo script lo aggiungerà all'iframe SENZA cambiare l'embed ID.
      (function () {
        var iframe = document.getElementById("stay22-widget");
        if (!iframe) return;

        var pageUrl = new URL(window.location.href);
        var campaign = pageUrl.searchParams.get("campaign");
        if (!campaign) return;

        // Evita di modificare l'iframe se campaign è già presente
        var iframeUrl = new URL(iframe.src);
        if (!iframeUrl.searchParams.get("campaign")) {
          iframeUrl.searchParams.set("campaign", campaign);
          iframe.src = iframeUrl.toString();
        }
      })();
    </script>
  </body>
</html>
