
<!DOCTYPE html>

<html lang="de">
<head>
<link href="assets/img/common/plane-logo.png" rel="icon" type="image/png"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Affiliate-Bereich – Travirae</title>
<meta content="Melde dich im Travirae-Partnerbereich an, um deine Affiliate-ID zu verwalten, getrackte Links zu erstellen und Klicks, Booking Clicks sowie monatliche Einnahmen zu verfolgen." name="description"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="assets/css/style.css" rel="stylesheet"/>
<script id="travirae-lang-router">
(function(){
  try{
    var key='travirae_email_lang';
    var lang='';
    try{ lang=String(localStorage.getItem(key)||'').toUpperCase(); }catch(e){}
    var u=new URL(window.location.href);
    var path=u.pathname||'';
    var file=path.split('/').pop()||'';
    var dir=path.slice(0, path.length - file.length);
    if(!file) file='index.html';
    var isDe=/-de\.html$/i.test(file);
    var isEn=/-en\.html$/i.test(file);
    var isFr=/-fr\.html$/i.test(file);
    var isEs=/-es\.html$/i.test(file);

    if(lang==='DEU'){
      if(!isDe && /\.html$/i.test(file)){
        var targetDe = isEn ? file.replace(/-en\.html$/i,'-de.html')
                    : (isFr ? file.replace(/-fr\.html$/i,'-de.html')
                            : (isEs ? file.replace(/-es\.html$/i,'-de.html')
                                    : file.replace(/\.html$/i,'-de.html')));
        u.pathname = dir + targetDe;
        window.location.replace(u.toString());
      }
    } else if(lang==='ENG'){
      if(!isEn && /\.html$/i.test(file)){
        var targetEn = isDe ? file.replace(/-de\.html$/i,'-en.html')
                    : (isFr ? file.replace(/-fr\.html$/i,'-en.html')
                            : (isEs ? file.replace(/-es\.html$/i,'-en.html')
                                    : file.replace(/\.html$/i,'-en.html')));
        u.pathname = dir + targetEn;
        window.location.replace(u.toString());
      }
    } else if(lang==='FRA'){
      if(!isFr && /\.html$/i.test(file)){
        var targetFr = isDe ? file.replace(/-de\.html$/i,'-fr.html')
                    : (isEn ? file.replace(/-en\.html$/i,'-fr.html')
                            : (isEs ? file.replace(/-es\.html$/i,'-fr.html')
                                    : file.replace(/\.html$/i,'-fr.html')));
        u.pathname = dir + targetFr;
        window.location.replace(u.toString());
      }
    } else if(lang==='SPA'){
      if(!isEs && /\.html$/i.test(file)){
        var targetEs = isDe ? file.replace(/-de\.html$/i,'-es.html')
                    : (isEn ? file.replace(/-en\.html$/i,'-es.html')
                            : (isFr ? file.replace(/-fr\.html$/i,'-es.html')
                                    : file.replace(/\.html$/i,'-es.html')));
        u.pathname = dir + targetEs;
        window.location.replace(u.toString());
      }
    } else {
      if(isDe){
        u.pathname = dir + file.replace(/-de\.html$/i,'.html');
        window.location.replace(u.toString());
      } else if(isEn){
        u.pathname = dir + file.replace(/-en\.html$/i,'.html');
        window.location.replace(u.toString());
      } else if(isFr){
        u.pathname = dir + file.replace(/-fr\.html$/i,'.html');
        window.location.replace(u.toString());
      } else if(isEs){
        u.pathname = dir + file.replace(/-es\.html$/i,'.html');
        window.location.replace(u.toString());
      }
    }
  }catch(e){}
})();
</script>
</head>
<body class="page--affiliate-portal">
<header class="site-header">
<div class="container header-inner">
<a aria-label="Travirae Startseite" class="brand" href="index.html">
<img alt="Travirae" src="assets/img/common/plane-logo.png" style="height:28px"/>
<span>Travirae</span>
</a>
<nav aria-label="Hauptnavigation" class="main-nav">
<a class="nav-link" href="index.html">Hotels</a>
<a class="nav-link" href="flights.html">Flüge</a>
<a class="nav-link active" href="programma-affiliato.html">Partnerprogramm</a>
</nav>
<button aria-expanded="false" aria-label="Menü öffnen" class="nav-toggle"><span></span><span></span><span></span></button>
</div>
</header>

<main>
<section class="section">
<div class="container affiliate-portal-grid">

  <div class="affiliate-intro">
    <p class="muted small" style="margin:0 0 6px;">Travirae Partnerprogramm</p>
    <h1>Affiliate-Bereich</h1>
    <p class="subtitle">Verwalte deine Affiliate-ID, generiere getrackte Links und behalte Klicks, Bookings und monatliche Einnahmen im Blick.</p>
    <ul class="benefits-list">
      <li>Erhalte eine <strong>einzigartige Affiliate-ID</strong>, die mit deinem Konto verknüpft ist.</li>
      <li>Teile Hotel- oder Flugseiten mit dem Parameter <code>?ref=DEINE_ID</code>.</li>
      <li>Behalte <strong>Klicks, Booking Clicks und monatliche Einnahmen</strong> direkt im Dashboard im Blick.</li>
    </ul></div>

  <div>
    <div class="auth-card">
      <div class="auth-card-header" id="auth-card-header-main">
        <h2 class="auth-card-title">Anmelden oder registrieren</h2>
        <p class="auth-card-subtitle">Melde dich im Affiliate-Bereich an, um deinen getrackten Link zu erhalten und deine Statistiken zu sehen.</p>
      </div>

      <div class="auth-tabs" role="tablist">
        <button type="button" class="auth-tab is-active" data-auth-tab="login">Anmelden</button>
        <button type="button" class="auth-tab" data-auth-tab="register">Registrieren</button>
      </div>

      <div class="auth-views">
        <!-- LOGIN -->
        <div class="auth-view auth-view-login" data-view="login">
          <form id="affiliate-login-form" class="auth-form" autocomplete="on">
            <div class="form-group">
              <label for="login-email">E-Mail</label>
              <input id="login-email" name="email" type="email" autocomplete="email" required/>
            </div>
            <div class="form-group">
              <label for="login-password">Passwort</label>
              <input id="login-password" name="password" type="password" autocomplete="current-password" required/>
            </div>
            <!-- La lingua email viene scelta dal selettore lingua del sito (in alto). -->

            <div class="checkbox-row" style="margin-top:8px;">
              <input id="login-remember" name="remember" type="checkbox" checked/>
              <label for="login-remember">Angemeldet bleiben</label>
            </div>
            <button type="button" class="auth-link auth-link--forgot" id="affiliate-forgot-link">Passwort vergessen?</button>
            <div class="auth-actions">
              <button type="submit" class="btn">Anmelden</button>
            </div>
          </form>
        </div>

        <!-- REGISTRAZIONE -->
        <div class="auth-view auth-view-register" data-view="register" hidden>
          <form id="affiliate-register-form" class="auth-form" autocomplete="on">
            <div class="form-group">
              <label for="register-email">E-Mail</label>
              <input id="register-email" name="email" type="email" autocomplete="email" required/>
            </div>
            <div class="form-group">
              <label for="register-password">Passwort</label>
              <input id="register-password" name="password" type="password" autocomplete="new-password" required/>
            </div>
            <div class="form-group">
              <label for="register-password-confirm">Passwort bestätigen</label>
              <input id="register-password-confirm" name="password_confirm" type="password" autocomplete="new-password" required/>
            </div>
            <!-- Lingua email: ora viene presa dal selettore lingua del sito (in alto) -->

            <div class="auth-actions">
              <button type="submit" class="btn">Registrieren</button>
            </div>
          </form>
        </div>

        <!-- FORGOT PASSWORD -->
        <div class="auth-view auth-view-forgot" data-view="forgot" hidden>
          <form id="affiliate-forgot-form" class="auth-form">
            <div class="form-group">
              <label for="forgot-email">E-Mail</label>
              <input id="forgot-email" name="email" type="email" required/>
            </div>
            <!-- Lingua email: ora viene presa dal selettore lingua del sito (in alto) -->

            <div class="auth-actions">
              <button type="submit" class="btn">Reset-Link senden</button>
              <button type="button" class="auth-link" data-back-to="login">Zurück zum Login</button>
            </div>
          </form>
        </div>

        <!-- RECOVERY -->
        <div class="auth-view auth-view-recovery" data-view="recovery" hidden>
          <form id="affiliate-recovery-form" class="auth-form">
            <p class="muted small">Du hast den Link zur Passwortwiederherstellung geöffnet. Lege unten ein neues Passwort für deinen Account fest.</p>
            <div class="form-group">
              <label for="recovery-password">Neues Passwort</label>
              <input id="recovery-password" name="password" type="password" required/>
            </div>
            <div class="form-group">
              <label for="recovery-password-confirm">Neues Passwort bestätigen</label>
              <input id="recovery-password-confirm" name="password_confirm" type="password" required/>
            </div>
            <div class="auth-actions">
              <button type="submit" class="btn">Passwort aktualisieren</button>
            </div>
          </form>
        </div>

        <!-- DASHBOARD -->
        <div class="auth-view auth-view-dashboard" data-view="dashboard" hidden>
          <div class="auth-card-header">
            <h2 class="auth-card-title">Affiliate-Dashboard</h2>
            <p class="auth-card-subtitle">Verwalte deine Affiliate-ID, Klicks, Booking Clicks und Einnahmen.</p>
          </div>

          <div class="affiliate-id-block">
            <div class="muted small">Deine Affiliate-ID</div>
            <code id="affiliate-slug"></code>
            <div class="affiliate-link-row">
              <label for="affiliate-link-input" class="muted small">Hauptlink zum Teilen</label>
              <div class="affiliate-link-input-row">
                <input id="affiliate-link-input" type="text" readonly/>
                <button type="button" class="btn" id="affiliate-copy-btn">Kopieren</button>
              </div>
            </div>
          </div>

          <div class="affiliate-stats-grid">
            <div class="stat-card">
              <div class="stat-label">Klicks gesamt</div>
              <div class="stat-value" id="affiliate-stat-clicks">—</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Bookings gesamt</div>
              <div class="stat-value" id="affiliate-stat-bookings">—</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Einnahmen gesamt</div>
              <div class="stat-value" id="affiliate-stat-total">—</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Einnahmen aktueller Monat</div>
              <div class="stat-value" id="affiliate-stat-month">—</div>
            </div>
          </div>

          <div class="affiliate-tier-card">
            <div class="tier-top">
              <h3 style="margin:0;">Aktuelle Umsatzbeteiligung</h3>
              <span class="badge" id="affiliate-share-percent">—</span>
            </div>
            <p class="muted small" id="affiliate-tier-subtitle" style="margin:6px 0 10px;">Basierend auf den gültigen Verkäufen des laufenden Monats.</p>
            <div class="progress" aria-label="Fortschritt Umsatzbeteiligung">
              <div class="progress-bar" id="affiliate-tier-progress" style="width:0%"></div>
            </div>
            <div class="tier-foot muted small" style="display:flex;justify-content:space-between;gap:12px;margin-top:8px;flex-wrap:wrap;">
              <span>Gültige Verkäufe (laufender Monat): <strong id="affiliate-tier-sales">0</strong></span>
              <span id="affiliate-tier-next">—</span>
            </div>
          </div>

          <div class="affiliate-payout-card">
            <h3 style="margin-top:0;">Auszahlungen</h3>
            <p class="muted small" style="margin-top:4px;">Mindest-Auszahlung: <strong>50 USD</strong>. Anfragen werden an den Admin gesendet und manuell bearbeitet.</p>

            <div class="payout-balance-box">
              <div class="muted small">Verfügbares Guthaben</div>
              <div class="stat-value" id="affiliate-available-balance">—</div>
            </div>

            <div class="payout-actions">
              <button type="button" class="btn" id="affiliate-open-payout-form-btn">Auszahlung anfordern</button>
            </div>

            <div id="affiliate-payout-form-wrap" hidden>
              <form id="affiliate-payout-form" class="auth-form" autocomplete="on">
                <div class="form-row-2">
                  <div class="form-group">
                    <label for="payout-amount">Betrag (USD)</label>
                    <input id="payout-amount" name="amount" type="number" min="50" step="0.01" required/>
                  </div>
                  <div class="form-group">
                    <label for="payout-method">Methode</label>
                    <select id="payout-method" name="method" required>
                      <option value="paypal">PayPal</option>
                      <option value="bank">SEPA/SWIFT-Überweisung</option>
                    </select>
                  </div>
                </div>

                <div id="payout-method-paypal">
                  <div class="form-group">
                    <label for="payout-paypal-email">PayPal-E-Mail</label>
                    <input id="payout-paypal-email" name="paypal_email" type="email" placeholder="name@beispiel.com"/>
                  </div>
                </div>

                <div id="payout-method-bank" hidden>
                  <div class="form-row-2">
                    <div class="form-group">
                      <label for="payout-beneficiary-name">Kontoinhaber</label>
                      <input id="payout-beneficiary-name" name="beneficiary_name" type="text" placeholder="Vor- und Nachname / Firmenname"/>
                    </div>
                    <div class="form-group">
                      <label for="payout-bank-country">Bankland</label>
                      <input id="payout-bank-country" name="bank_country" type="text" placeholder="z. B. IT, DE, US"/>
                    </div>
                  </div>

                  <div class="form-row-2">
                    <div class="form-group">
                      <label for="payout-iban">IBAN (SEPA)</label>
                      <input id="payout-iban" name="iban" type="text" placeholder="IT60X0542811101000000123456"/>
                    </div>
                    <div class="form-group">
                      <label for="payout-swift">SWIFT/BIC (se serve)</label>
                      <input id="payout-swift" name="swift_bic" type="text" placeholder="UNCRITMMXXX"/>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="payout-bank-name">Bankname (optional)</label>
                    <input id="payout-bank-name" name="bank_name" type="text"/>
                  </div>

                  <div class="form-group">
                    <label for="payout-bank-address">Bankadresse (optional)</label>
                    <input id="payout-bank-address" name="bank_address" type="text"/>
                  </div>
                </div>

                <div class="divider-line"></div>

                <h4 style="margin:0 0 6px;">Steuerangaben (für internationale Compliance)</h4>
                <p class="muted small" style="margin:0 0 10px;">Sie werden benötigt, um den Zahlungsempfänger zu identifizieren und ggf. KYC-/Anti-Fraud-Prüfungen zu unterstützen.</p>

                <div class="form-row-2">
                  <div class="form-group">
                    <label for="payout-legal-name">Rechtlicher Name / Firmenname</label>
                    <input id="payout-legal-name" name="legal_name" type="text" required/>
                  </div>
                  <div class="form-group">
                    <label for="payout-subject-type">Art des Empfängers</label>
                    <select id="payout-subject-type" name="subject_type" required>
                      <option value="individual">Privatperson</option>
                      <option value="company">Unternehmen / Selbstständig</option>
                    </select>
                  </div>
                </div>

                <div class="form-row-2">
                  <div class="form-group">
                    <label for="payout-tax-country">Land der steuerlichen Ansässigkeit</label>
                    <input id="payout-tax-country" name="tax_residence_country" type="text" placeholder="Es. IT" required/>
                  </div>
                  <div class="form-group">
                    <label for="payout-tax-id">Steuernummer / USt-IdNr. / Tax ID (falls vorhanden)</label>
                    <input id="payout-tax-id" name="tax_id" type="text" placeholder="Optional, aber empfohlen"/>
                  </div>
                </div>

                <div class="form-row-2">
                  <div class="form-group">
                    <label for="payout-address-country">Land (Adresse)</label>
                    <input id="payout-address-country" name="address_country" type="text" placeholder="Es. IT" required/>
                  </div>
                  <div class="form-group">
                    <label for="payout-address-city">Stadt</label>
                    <input id="payout-address-city" name="address_city" type="text" required/>
                  </div>
                </div>

                <div class="form-group">
                  <label class="checkbox-row">
                    <input id="payout-remember" name="remember" type="checkbox"/>
                    <span>Für zukünftige Auszahlungen merken (Daten im Profil speichern)</span>
                  </label>
                </div>

                <div class="form-group">
                  <label class="checkbox-row">
                    <input id="payout-confirm" name="confirm" type="checkbox" required/>
                    <span>Ich bestätige, dass die angegebenen Daten korrekt sind und dass ich der Zahlungsempfänger bin.</span>
                  </label>
                </div>

                <div class="auth-actions" style="justify-content:flex-start;">
                  <button type="submit" class="btn">Anfrage senden</button>
                  <button type="button" class="btn secondary" id="affiliate-cancel-payout-form-btn">Abbrechen</button>
                </div>
              </form>
            </div>

            <div class="affiliate-table-card" style="margin-top:12px;">
              <h3 style="margin-top:0;">Historie der Auszahlungsanfragen</h3>
              <div class="table-wrapper">
                <table class="table affiliate-payouts-table">
                  <thead>
                    <tr>
                      <th>Datum</th>
                      <th>Betrag</th>
                      <th>Methode</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody id="affiliate-payout-requests-tbody">
                    <tr><td colspan="4" class="muted small">Bisher keine Anfrage gesendet.</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="affiliate-chart-card">
            <h3>Monatliche Einnahmen</h3>
            <div style="height:220px;">
              <canvas id="affiliate-payouts-chart" aria-label="Diagramm der monatlichen Einnahmen (Affiliate)"></canvas>
            </div>
          </div>

          <div class="affiliate-table-card">
            <h3>Historie monatlicher Auszahlungen</h3>
            <table class="table affiliate-payouts-table">
              <thead>
                <tr>
                  <th>Monat</th>
                  <th>Gültige Verkäufe</th>
                  <th>Netto-Provisionen</th>
                  <th>Revenue share</th>
                  <th>Dein Anteil</th>
                </tr>
              </thead>
              <tbody id="affiliate-payouts-table-body">
                <tr><td colspan="5" class="muted small">Bisher keine Auszahlungen erfasst.</td></tr>
              </tbody>
            </table>
          </div>

          <div class="affiliate-dashboard-actions">
            <button type="button" class="btn secondary" id="affiliate-2fa-btn">Sicherheit (2FA)</button>
            <button type="button" class="btn secondary" id="affiliate-change-lang-btn">Sprache ändern</button>
            <button type="button" class="btn" id="affiliate-logout-btn">Abmelden</button>
          </div>
        </div>
      </div>

      <div id="affiliate-auth-message" class="auth-message" aria-live="polite"></div>
    </div>
  </div>

</div>
</section>
</main>

<footer class="mega-footer">
<div class="container mf-grid">
<div class="mf-brand">
<div class="brand big">
<img alt="Travirae" src="assets/img/common/plane-logo.png" style="height:28px"/>
<span>Travirae</span>
</div>
<p class="muted">Deine Plattform für Reiseinspiration und Hotelbuchung mit interaktiver Karte.</p>
<div class="mf-socials">
  <a class="social social--icon" href="https://www.instagram.com/travirae_official/" aria-label="Instagram" target="_blank" rel="noopener">
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg" alt="" loading="lazy"/>
  </a>
  <a class="social social--icon" href="https://www.facebook.com/profile.php?id=61573037940606" aria-label="Facebook" target="_blank" rel="noopener">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="" loading="lazy"/>
  </a>
  <a class="social social--icon" href="https://www.tiktok.com/@travirae?lang=en" aria-label="TikTok" target="_blank" rel="noopener">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a6/Tiktok_icon.svg" alt="" loading="lazy"/>
  </a>
  <a class="social social--icon" href="https://www.youtube.com/channel/UCgGtp3qTHUzMPqjpT8EnRbQ" aria-label="YouTube" target="_blank" rel="noopener">
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg" alt="" loading="lazy"/>
  </a>
</div>
</div>
<nav class="mf-services"><h4>Services</h4><ul>
<li><a href="flights.html">Flüge</a></li>
<li><a href="index.html">Hotels</a></li>
<li><a href="programma-affiliato.html">Partnerprogramm</a></li>
</ul></nav>
<div class="mf-contact">
<h4>Bleib in Kontakt</h4>
<ul class="contact-list">
<li>✉️ info@travirae.com</li>
<li>Abonniere unseren Newsletter</li>
</ul>
<!-- Newsletter (gestita via Supabase Edge Function).
     Usiamo method="get" e un id fisso per evitare submit POST (405) se JS non è caricato. -->
<form id="newsletter-form" class="newsletter-form wide" action="#" method="get">
<input aria-label="E-Mail für Newsletter" name="newsletter_email" placeholder="Deine E-Mail" required="" type="email"/>
<button class="btn" type="submit">Abonnieren</button>
</form>
</div>
</div>
<div class="container mf-bottom muted small">
<div>© <span id="year-copy"></span> Travirae · Alle Rechte vorbehalten</div>
<div class="mf-legal">
<a href="privacy.html">Datenschutz</a> · <a href="termini.html">Bedingungen</a> · <a href="cookie.html">Cookies</a>
</div>
</div>
</footer>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="assets/js/config.js"></script>
<script src="assets/js/supabase-init.js"></script>
<script src="assets/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="assets/js/affiliate-area-de.js"></script>
</body>
</html>
