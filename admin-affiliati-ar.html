
<!DOCTYPE html>

<html dir="rtl" lang="ar">
<head>
<link href="assets/img/common/plane-logo.png" rel="icon" type="image/png"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>لوحة تحكم إدارة الشركاء | Travirae</title>
<meta content="لوحة تحكم مدير برنامج شركاء Travirae: المبيعات، العمولات، المدفوعات، الطلبات وحركة الزيارات." name="description"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="assets/css/style.css" rel="stylesheet"/><link href="assets/css/rtl-ar.css" rel="stylesheet"/>
<script id="travirae-lang-router">(function(){
  try{
    var key='travirae_email_lang';
    var lang='';
    try{ lang=String(localStorage.getItem(key)||'').toUpperCase(); }catch(e){}
    if(!lang) return;

    var map={DEU:'de', ENG:'en', FRA:'fr', SPA:'es', RUS:'ru', ARA:'ar', NLD:'nl'};
    var suf=map[lang];
    if(!suf) return;

    var u=new URL(window.location.href);
    var path=u.pathname||'';
    var file=path.split('/').pop()||'';
    var dir=path.slice(0, path.length - file.length);
    if(!file) file='index.html';

    // If already on the correct language page, do nothing
    var reTarget=new RegExp('-'+suf+'\\.html$','i');
    if(reTarget.test(file)) return;

    // Only handle .html pages
    if(!/\\.html$/i.test(file)) return;

    // Strip any other supported suffix, then append the requested one
    var target=file.replace(/-(de|en|fr|es|ru|ar|nl)\\.html$/i,'.html').replace(/\\.html$/i,'-'+suf+'.html');
    u.pathname = dir + target;
    window.location.replace(u.toString());
  }catch(e){}
})();</script>
</head>
<body class="page--affiliate-admin">
<header class="site-header">
<div class="container header-inner">
<a aria-label="الصفحة الرئيسية لـ Travirae" class="brand" href="index.html">
<img alt="Travirae" src="assets/img/common/plane-logo.png" style="height:28px"/>
<span>Travirae</span>
</a>
<nav aria-label="التنقل الرئيسي" class="main-nav">
<a class="nav-link" href="index.html">فنادق</a>
<a class="nav-link" href="flights.html">رحلات</a>
<a class="nav-link" href="programma-affiliato.html">برنامج الشركاء</a>
</nav>
<button aria-expanded="false" aria-label="فتح القائمة" class="nav-toggle"><span></span><span></span><span></span></button>
</div>
</header>
<main>
<section class="section">
<div class="container">
<div class="auth-card">
<div class="admin-header">
<h1 id="admin-title" style="font-size:1.3rem;margin:0 0 4px;">لوحة تحكم الإدارة للشركاء</h1>
<p class="muted small" id="admin-subtitle" style="margin:0;">سجّل الدخول بحساب المدير لعرض الإحصاءات العامة لبرنامج الشركاء.</p>
</div>
<div id="admin-view-login">
<form autocomplete="on" class="auth-form" id="admin-login-form">
<div class="form-group">
<label for="admin-email">بريد المدير الإلكتروني</label>
<input id="admin-email" name="email" required="" type="email"/>
</div>
<div class="form-group">
<label for="admin-password">كلمة المرور</label>
<input id="admin-password" name="password" required="" type="password"/>
</div>
<div class="auth-actions">
<button class="btn" type="submit">تسجيل الدخول</button>
</div>
</form>
</div>
<div hidden="" id="admin-view-dashboard">
<div class="admin-stats-grid">
<div class="stat-card">
<div class="stat-label">المبيعات المعتمدة (هذا الشهر)</div>
<div class="stat-value" id="admin-total-sales">—</div>
</div>
<div class="stat-card">
<div class="stat-label">العمولات الصافية (هذا الشهر)</div>
<div class="stat-value" id="admin-total-net">—</div>
</div>
<div class="stat-card">
<div class="stat-label">دفعات الشركاء (هذا الشهر)</div>
<div class="stat-value" id="admin-total-aff">—</div>
</div>
<div class="stat-card">
<div class="stat-label">هامش Travirae (هذا الشهر)</div>
<div class="stat-value" id="admin-total-trav">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المبيعات المباشرة (بدون شريك)</div>
<div class="stat-value" id="admin-direct-sales">—</div>
</div>
<div class="stat-card">
<div class="stat-label">العمولات المباشرة (بدون شريك)</div>
<div class="stat-value" id="admin-direct-net">—</div>
</div>
</div>
<h2 class="admin-section-title">حركة الزيارات إلى الموقع (هذا الشهر)</h2>
<div class="admin-stats-grid">
<div class="stat-card">
<div class="stat-label">إجمالي الزيارات</div>
<div class="stat-value" id="admin-traffic-visits">—</div>
</div>
<div class="stat-card">
<div class="stat-label">إجمالي مرات مشاهدة الصفحات</div>
<div class="stat-value" id="admin-traffic-pageviews">—</div>
</div>
<div class="stat-card">
<div class="stat-label">زيارات من الشركاء</div>
<div class="stat-value" id="admin-traffic-visits-affiliate">—</div>
</div>
<div class="stat-card">
<div class="stat-label">زيارات مباشرة</div>
<div class="stat-value" id="admin-traffic-visits-direct">—</div>
</div>
</div>
<div class="admin-note" style="margin-top:10px;">
<span class="muted small">“الزيارات” هي جلسات فريدة (session_id)؛ و“مرات مشاهدة الصفحات” هي تحميل الصفحات التي يتتبعها الموقع. تشمل البيانات الزيارات مع وبدون معلمة <code>?ref=</code>.</span>
</div>
<h2 class="admin-section-title" style="margin-top:18px;">نقرات الحجز على الموقع (هذا الشهر)</h2>
<div class="admin-stats-grid">
<div class="stat-card">
<div class="stat-label">إجمالي نقرات الحجز</div>
<div class="stat-value" id="admin-bclick-total">—</div>
</div>
<div class="stat-card">
<div class="stat-label">نقرات حجز من الشركاء</div>
<div class="stat-value" id="admin-bclick-affiliate">—</div>
</div>
<div class="stat-card">
<div class="stat-label">نقرات حجز مباشرة (بدون شريك)</div>
<div class="stat-value" id="admin-bclick-direct">—</div>
</div>
</div>
<div class="admin-note" style="margin-top:10px;">
<span class="muted small">“نقرات الحجز” هي نقرات داخل الأدوات (Stay22 / Aviasales) تنقل المستخدم إلى موقع خارجي. <strong>ليست</strong> مبيعات مؤكدة.</span>
</div>
<div class="admin-actions">
<button class="btn secondary" id="admin-reload-btn" type="button">إعادة تحميل البيانات</button>
<button class="btn secondary" id="admin-import-aviasales-btn" type="button">استيراد مبيعات Aviasales</button>
<button class="btn secondary" id="admin-import-stay22-csv-btn" type="button">استيراد CSV من Stay22</button>
<input accept=".csv,text/csv" hidden="" id="admin-stay22-csv-input" type="file"/>
<button class="btn secondary" id="admin-refresh-payouts-btn" type="button">تحديث المدفوعات</button>
<button class="btn secondary" id="admin-2fa-btn" type="button">الأمان (2FA)</button>
<button class="btn" id="admin-logout-btn" type="button">تسجيل الخروج</button>
</div>
<details class="admin-accordion" id="admin-newsletter-accordion">
<summary class="admin-section-title admin-accordion-summary">النشرة البريدية</summary>
<div class="admin-stats-grid" style="margin-top: 10px;">
<div class="stat-card">
<div class="stat-label">مشتركو النشرة (الإجمالي)</div>
<div class="stat-value" id="admin-newsletter-count">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (ITA)</div>
<div class="stat-value" id="admin-newsletter-count-ITA">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (ENG)</div>
<div class="stat-value" id="admin-newsletter-count-ENG">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (ARA)</div>
<div class="stat-value" id="admin-newsletter-count-ARA">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (DEU)</div>
<div class="stat-value" id="admin-newsletter-count-DEU">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (SPA)</div>
<div class="stat-value" id="admin-newsletter-count-SPA">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (RUS)</div>
<div class="stat-value" id="admin-newsletter-count-RUS">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (NLD)</div>
<div class="stat-value" id="admin-newsletter-count-NLD">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (ZHO)</div>
<div class="stat-value" id="admin-newsletter-count-ZHO">—</div>
</div>
<div class="stat-card">
<div class="stat-label">المشتركون (FRA)</div>
<div class="stat-value" id="admin-newsletter-count-FRA">—</div>
</div>
</div>
<div class="admin-card" style="margin-top: 12px;">
<form class="admin-newsletter-form" id="admin-newsletter-form">
<p class="muted small" style="margin: 0 0 12px;">لإرسال النشرة البريدية يجب تعبئة <strong>الموضوع</strong> و<strong>النص</strong> لكل <strong>اللغات</strong>. إذا كان أي حقل ناقصًا فسيتم منع الإرسال. تُرسل النشرة باللغة المحفوظة عند الاشتراك (مثال: إذا اشترك المستخدم بينما الموقع على ENG فسيستلم النشرة بالـ ENG).</p>
<div class="admin-newsletter-grid">
<div class="admin-newsletter-lang" data-lang="ITA">
<div class="admin-newsletter-lang-head"><span class="code">ITA</span><span class="name">الإيطالية</span></div>
<label for="newsletter-subject-ITA">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-ITA" placeholder="الموضوع (ITA)" type="text"/>
<label for="newsletter-body-ITA">النص</label>
<textarea id="newsletter-body-ITA" placeholder="نص النشرة (ITA)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="ENG">
<div class="admin-newsletter-lang-head"><span class="code">ENG</span><span class="name">الإنجليزية</span></div>
<label for="newsletter-subject-ENG">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-ENG" placeholder="الموضوع (ENG)" type="text"/>
<label for="newsletter-body-ENG">النص</label>
<textarea id="newsletter-body-ENG" placeholder="نص النشرة (ENG)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="FRA">
<div class="admin-newsletter-lang-head"><span class="code">FRA</span><span class="name">الفرنسية</span></div>
<label for="newsletter-subject-FRA">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-FRA" placeholder="الموضوع (FRA)" type="text"/>
<label for="newsletter-body-FRA">النص</label>
<textarea id="newsletter-body-FRA" placeholder="نص النشرة (FRA)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="DEU">
<div class="admin-newsletter-lang-head"><span class="code">DEU</span><span class="name">الألمانية</span></div>
<label for="newsletter-subject-DEU">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-DEU" placeholder="الموضوع (DEU)" type="text"/>
<label for="newsletter-body-DEU">النص</label>
<textarea id="newsletter-body-DEU" placeholder="Newsletter-Text (DEU)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="SPA">
<div class="admin-newsletter-lang-head"><span class="code">SPA</span><span class="name">الإسبانية</span></div>
<label for="newsletter-subject-SPA">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-SPA" placeholder="الموضوع (SPA)" type="text"/>
<label for="newsletter-body-SPA">النص</label>
<textarea id="newsletter-body-SPA" placeholder="نص النشرة (SPA)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="NLD">
<div class="admin-newsletter-lang-head"><span class="code">NLD</span><span class="name">الهولندية</span></div>
<label for="newsletter-subject-NLD">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-NLD" placeholder="الموضوع (NLD)" type="text"/>
<label for="newsletter-body-NLD">النص</label>
<textarea id="newsletter-body-NLD" placeholder="Nieuwsbrieftekst (NLD)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="RUS">
<div class="admin-newsletter-lang-head"><span class="code">RUS</span><span class="name">الروسية</span></div>
<label for="newsletter-subject-RUS">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-RUS" placeholder="الموضوع (RUS)" type="text"/>
<label for="newsletter-body-RUS">النص</label>
<textarea id="newsletter-body-RUS" placeholder="نص النشرة рассылки (RUS)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="ARA">
<div class="admin-newsletter-lang-head"><span class="code">ARA</span><span class="name">العربية</span></div>
<label for="newsletter-subject-ARA">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-ARA" placeholder="الموضوع (ARA)" type="text"/>
<label for="newsletter-body-ARA">النص</label>
<textarea id="newsletter-body-ARA" placeholder="نص النشرة (ARA)" rows="6"></textarea>
</div>
<div class="admin-newsletter-lang" data-lang="ZHO">
<div class="admin-newsletter-lang-head"><span class="code">ZHO</span><span class="name">الصينية</span></div>
<label for="newsletter-subject-ZHO">الموضوع</label>
<input autocomplete="off" id="newsletter-subject-ZHO" placeholder="الموضوع (ZHO)" type="text"/>
<label for="newsletter-body-ZHO">النص</label>
<textarea id="newsletter-body-ZHO" placeholder="نص النشرة (ZHO)" rows="6"></textarea>
</div>
</div>
<div class="admin-actions" style="justify-content:flex-end; margin-top: 12px;">
<button class="btn secondary" id="admin-newsletter-clear-btn" type="button">مسح المسودات</button>
<button class="btn btn-primary" id="admin-newsletter-send-btn" type="submit">إرسال النشرة</button>
</div>
<div class="admin-message" id="admin-newsletter-status" style="display:none; margin-top: 10px;"></div>
<!-- Mini preview HTML: scegli una lingua e vedi l'email prima di inviare -->
<div aria-label="معاينة HTML للنشرة البريدية" class="admin-newsletter-preview">
<div class="admin-newsletter-preview__head">
<div class="admin-newsletter-preview__title">معاينة النشرة (HTML)</div>
<div class="admin-newsletter-preview__controls">
<label class="small muted" for="admin-newsletter-preview-lang">اللغة</label>
<select aria-label="اختر لغة المعاينة" class="admin-newsletter-preview__select" id="admin-newsletter-preview-lang"></select>
</div>
</div>
<div class="admin-newsletter-preview__meta small muted">
<span>الموضوع:</span>
<span class="admin-newsletter-preview__subject" id="admin-newsletter-preview-subject"></span>
</div>
<div class="admin-newsletter-preview__meta small muted">
<span>النص (HTML):</span>
</div>
<textarea class="admin-newsletter-preview__raw" id="admin-newsletter-preview-body" readonly="" rows="6"></textarea>
<iframe class="admin-newsletter-preview__iframe" id="admin-newsletter-preview-iframe" sandbox="" title="معاينة النشرة البريدية"></iframe>
</div>
</form>
</div>
</details>
<h2 class="admin-section-title">الاتجاه الشهري (مجمّع)</h2>
<div class="admin-table-wrapper">
<table class="admin-table">
<thead>
<tr>
<th>الشهر</th>
<th>المبيعات</th>
<th>العمولات الصافية</th>
<th>دفعات الشركاء</th>
<th>هامش Travirae</th>
</tr>
</thead>
<tbody id="admin-monthly-tbody">
<tr><td class="muted small" colspan="5">لا توجد بيانات متاحة.</td></tr>
</tbody>
</table>
</div>
<h2 class="admin-section-title">ملخص لكل شريك</h2>
<div class="admin-table-wrapper">
<table class="admin-table">
<thead>
<tr>
<th>معرّف الشريك</th>
<th>المبيعات</th>
<th>العمولات الصافية</th>
<th>دفعات الشركاء</th>
<th>هامش Travirae</th>
</tr>
</thead>
<tbody id="admin-affiliates-tbody">
<tr><td class="muted small" colspan="5">لا توجد بيانات متاحة.</td></tr>
</tbody>
</table>
</div>
<h2 class="admin-section-title">العمليات (النقرات ونقرات الحجز)</h2>
<p class="muted small" style="margin-top:-4px;">“نقرة الحجز” = نقرة داخل الأداة (Stay22/Aviasales) تنقل المستخدم خارج الموقع. ليست مبيعات مؤكدة.</p>
<div class="admin-table-wrapper">
<table class="admin-table">
<thead>
<tr>
<th>معرّف الشريك</th>
<th>البريد الإلكتروني</th>
<th>نقرات الروابط</th>
<th>إجمالي نقرات الحجز</th>
<th>نقرات حجز Aviasales</th>
<th>نقرات حجز Stay22</th>
<th>مبيعات مؤكدة (الشهر)</th>
<th>حصة الإيرادات (الشهر)</th>
<th>الأرباح الشهرية</th>
<th>الرصيد المتاح</th>
<th>طلبات معلّقة</th>
<th>آخر نشاط</th>
</tr>
</thead>
<tbody id="admin-affiliates-kpi-tbody">
<tr><td class="muted small" colspan="12">لا توجد بيانات متاحة.</td></tr>
</tbody>
</table>
</div>
<h2 class="admin-section-title">طلبات الدفع</h2>
<div class="admin-table-wrapper">
<table class="admin-table">
<thead>
<tr>
<th>التاريخ</th>
<th>الشريك</th>
<th>المبلغ (USD)</th>
<th>الطريقة</th>
<th>الحالة</th>
<th>التفاصيل</th>
<th>الإجراءات</th>
</tr>
</thead>
<tbody id="admin-payout-requests-tbody">
<tr><td class="muted small" colspan="7">لا توجد طلبات دفع.</td></tr>
</tbody>
</table>
</div>
</div>
<div style="margin-top:18px;">
<h2 class="admin-section-title">مخطط (الشركاء مقابل Travirae)</h2>
<div style="height:260px;">
<canvas aria-label="مخطط أرباح الشركاء مقابل Travirae" id="admin-earnings-chart"></canvas>
</div>
</div>
</div>
<div aria-live="polite" class="admin-message" id="admin-message"></div>
</div>
</section>
</main>
<footer class="mega-footer">
<div class="container mf-grid">
<div class="mf-brand">
<div class="brand big">
<img alt="Travirae" src="assets/img/common/plane-logo.png" style="height:28px"/>
<span>Travirae</span>
</div>
<p class="muted">منصتك لإلهام السفر وحجز الفنادق عبر خريطة تفاعلية.</p>
<div class="mf-socials">
<a aria-label="Instagram" class="social social--icon" href="https://www.instagram.com/travirae_official/" rel="noopener" target="_blank">
<img alt="" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg"/>
</a>
<a aria-label="Facebook" class="social social--icon" href="https://www.facebook.com/profile.php?id=61573037940606" rel="noopener" target="_blank">
<img alt="" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"/>
</a>
<a aria-label="TikTok" class="social social--icon" href="https://www.tiktok.com/@travirae?lang=en" rel="noopener" target="_blank">
<img alt="" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/a/a6/Tiktok_icon.svg"/>
</a>
<a aria-label="YouTube" class="social social--icon" href="https://www.youtube.com/channel/UCgGtp3qTHUzMPqjpT8EnRbQ" rel="noopener" target="_blank">
<img alt="" loading="lazy" src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg"/>
</a>
</div>
</div>
<nav class="mf-services"><h4>الخدمات</h4><ul>
<li><a href="flights.html">رحلات</a></li>
<li><a href="index.html">فنادق</a></li>
<li><a href="programma-affiliato.html">برنامج الشركاء</a></li>
</ul></nav>
<div class="mf-contact">
<h4>ابقَ على تواصل</h4>
<ul class="contact-list">
<li>✉️ info@travirae.com</li>
<li>اشترك في نشرتنا البريدية</li>
</ul>
<!-- Newsletter (gestita via Supabase Edge Function).
     Usiamo method="get" e un id fisso per evitare submit POST (405) se JS non è caricato. -->
<form action="#" class="newsletter-form wide" id="newsletter-form" method="get">
<input aria-label="بريد النشرة البريدية" name="newsletter_email" placeholder="بريدك الإلكتروني" required="" type="email"/>
<button class="btn" type="submit">اشترك</button>
</form>
</div>
</div>
<div class="container mf-bottom muted small">
<div>© Travirae · جميع الحقوق محفوظة</div>
<div class="mf-legal">
<a href="privacy.html">سياسة الخصوصية</a> · <a href="termini.html">الشروط</a> · <a href="cookie.html">ملفات تعريف الارتباط</a>
</div>
</div>
</footer>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="assets/js/config.js"></script>
<script src="assets/js/supabase-init.js"></script>
<script src="assets/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="assets/js/admin-affiliati-ar.js"></script>
</body>
</html>
